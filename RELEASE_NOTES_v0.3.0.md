# Fieldnotes Lite v0.3.0 发布说明

## 🎉 重大更新：Word导出完全重构 + 右键菜单

这是一个重大更新版本，完全重构了Word导出系统，带来更智能、更灵活的语料展示效果。

---

## ✨ 核心亮点

### 1. 🚀 完全动态的智能换行
- **告别硬编码**：不再固定每行放多少个词
- **逐词智能检测**：自动判断下一个词会不会导致压缩或溢出
- **自适应字体大小**：页面宽度计算跟随字体大小动态调整
- **短词多放，长词少放**：根据实际内容自动优化布局

### 2. 📐 交错布局
- **原文和词汇分解紧挨着**：
  ```
  原文行1
  gloss行1
  原文行2
  gloss行2
  ```
- **更直观的对应关系**：每个词和它的词汇分解在垂直方向上紧密相连
- **汉字字段同步交错**：原文(汉字)和词汇分解(汉字)也跟随主字段交错排列

### 3. 🖱️ 右键菜单功能
在语料列表中右键点击，快速执行：
- 📝 编辑选中项
- 🗑️ 删除选中项（支持批量删除）
- 📄 导出为文本
- 📋 导出为Word
- 📋 复制单元格内容

### 4. 🎨 字体设置增强
新增中文字体选项：
- 宋体 / Songti SC / SimSun
- 黑体 / Heiti SC / SimHei
- 楷体 / Kaiti SC
- 微软雅黑 / Microsoft YaHei

---

## 🔧 技术改进

### Word导出优化
- ✅ 单元格内文本不换行（避免挤压）
- ✅ 左右边距统一为0.19cm
- ✅ 动态行高（基于最高词自动调整）
- ✅ 表格占满页面宽度
- ✅ 移除翻译字段的单引号

### 完全动态化
- ✅ 行高：`font_size * 4` + 上标补偿
- ✅ 页面宽度：`(15.9cm × chars_per_cm) × 1.2 × calibration_factor`
- ✅ 校准系数：`1.2 × (font_size / 10.0)`
- ✅ 最小化硬编码（仅保留物理尺寸：15.9cm、0.19cm）

### 核心算法
- `_estimate_word_height()`: 动态估算词高（考虑上标/下标）
- `_estimate_word_width()`: 动态估算词宽（考虑字符类型）
- `_will_cause_overflow()`: 检测是否会压缩或溢出
- `_split_words_by_cumulative_width()`: 逐词累计宽度分行

---

## 📊 用户体验提升

### 之前的问题
- ❌ 固定每行10个词，导致长词被挤压
- ❌ 原文和词汇分解分离太远，不直观
- ❌ 无法快速删除或导出选中项
- ❌ 单元格被压缩，如 "(2)" 变成 "(2\n)"

### 现在的效果
- ✅ 长词自动减少每行数量，避免压缩
- ✅ 原文和词汇分解紧挨着，一目了然
- ✅ 右键菜单快速操作，提升效率
- ✅ 所有单元格内容完整显示，不换行

---

## 🎯 适用场景

这次更新特别适合：
- 📖 **长句子语料**：自动优化换行，避免单元格挤压
- 🔤 **多种字体大小**：动态计算适配不同字体设置
- 📝 **带上标的IPA**：自动补偿高度，所有行高一致
- 🇨🇳 **中英双语语料**：更好的中文字体支持

---

## 📥 下载和安装

### macOS
```bash
# 下载 Fieldnotes-macos.tar.gz
tar -xzf Fieldnotes-macos.tar.gz
# 运行 Fieldnotes.app
```

### Windows
```powershell
# 下载 Fieldnotes-windows.zip
# 解压后运行 Fieldnotes.exe
```

### Linux
```bash
# 下载 Fieldnotes-linux.tar.gz
tar -xzf Fieldnotes-linux.tar.gz
# 运行 Fieldnotes
```

---

## 🙏 感谢

感谢所有用户的反馈和建议！如有问题或建议，请在 GitHub Issues 中提出。

---

**完整更新日志**：[CHANGELOG.md](CHANGELOG.md)

